<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>比較 Pass by Value / Reference / Name | Apuntes</title>
    <meta name="description" content="Scott Lin&#39;s notes">
    <link rel="icon" href="/favicon.ico">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    
    <link rel="preload" href="/assets/css/0.styles.5bfd9109.css" as="style"><link rel="preload" href="/assets/js/app.41d1b430.js" as="script"><link rel="preload" href="/assets/js/2.93c13480.js" as="script"><link rel="preload" href="/assets/js/12.280a4e99.js" as="script"><link rel="prefetch" href="/assets/js/10.8a9b6537.js"><link rel="prefetch" href="/assets/js/11.3f2c6e7a.js"><link rel="prefetch" href="/assets/js/13.5b58545b.js"><link rel="prefetch" href="/assets/js/3.7db57c28.js"><link rel="prefetch" href="/assets/js/4.13646481.js"><link rel="prefetch" href="/assets/js/5.b7ad6481.js"><link rel="prefetch" href="/assets/js/6.44ceb670.js"><link rel="prefetch" href="/assets/js/7.c64bda86.js"><link rel="prefetch" href="/assets/js/8.ae1ddb50.js"><link rel="prefetch" href="/assets/js/9.d2f8097b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5bfd9109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Apuntes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="content default"><h1 id="比較-pass-by-value-reference-name"><a href="#比較-pass-by-value-reference-name" aria-hidden="true" class="header-anchor">#</a> 比較 Pass by Value / Reference / Name</h1> <h5 id="date-2019-march-28"><a href="#date-2019-march-28" aria-hidden="true" class="header-anchor">#</a> Date: 2019/March/28</h5> <br> <hr> <h2 id="_60-seconds"><a href="#_60-seconds" aria-hidden="true" class="header-anchor">#</a> 60 seconds</h2> <p>似乎有點難...</p> <br> <hr> <h2 id="_60-minutes"><a href="#_60-minutes" aria-hidden="true" class="header-anchor">#</a> 60 minutes</h2> <p>首先引用一段螞蟻書裡關於<strong>pass by value</strong> 及 <strong>pass by reference</strong>的內容</p> <h4 id="_5-9-passing-arguments-by-value-and-by-reference"><a href="#_5-9-passing-arguments-by-value-and-by-reference" aria-hidden="true" class="header-anchor">#</a> 5.9 Passing Arguments By Value and By Reference</h4> <blockquote><p>When arguments are <em>passed by value</em>, a <em>copy</em> of the argument’s value<br>
is made and passed to the called function.</p> <p>Changes to the copy do <em>not</em> affect an original<br>
variable’s value in the caller.</p> <p>When an argument is passed by reference, the caller allows the<br>
called function to <em>modify</em> the original variable’s value.</p> <p>Pass-by-value should be used whenever the called function does not need to modify<br>
the value of the caller’s original variable.</p> <p>This prevents the accidental <strong>side effects</strong> (variable<br>
modifications) that so greatly hinder the development of correct and reliable software systems.</p> <p>Pass-by-reference should be used only with <em>trusted</em> called functions that need to<br>
modify the original variable.</p> <p>In C, all arguments are passed by value.</p> <p>As we’ll see in Chapter 7, it’s possible to <strong>simulate</strong> pass-by-reference by using the <em>address operator</em> and the <em>indirection operator</em>.</p></blockquote> <h4 id="傳值-pass-by-value"><a href="#傳值-pass-by-value" aria-hidden="true" class="header-anchor">#</a> 傳值(pass by value)</h4> <p>將變數傳送至函式上對應的參數時,<br>
會將值複製再傳進去.</p> <p>此時對這些變數的修改並不會影響原本變數的值.<br>
最有名的例子應該就是swap了:</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> temp <span class="token builtin">int</span> <span class="token operator">=</span> x
    x <span class="token operator">=</span> y
    y <span class="token operator">=</span> temp
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token keyword">var</span> y <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token comment">// output: x = 5;</span>
    <span class="token comment">// y = 10;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>不管在swap()裡如何對x, y兩個變數做運算, 都<strong>不會</strong>變更到main()裡面x與y的實際值.</p> <br> <h4 id="傳參考-pass-by-reference"><a href="#傳參考-pass-by-reference" aria-hidden="true" class="header-anchor">#</a> 傳參考(pass by reference)</h4> <p>若是以傳參考的方式傳遞變數, 則會允許被呼叫的函式去修改變數的原始值.</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>x <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    temp <span class="token operator">:=</span> <span class="token operator">*</span>x
    <span class="token operator">*</span>x <span class="token operator">=</span> <span class="token operator">*</span>y
    <span class="token operator">*</span>y <span class="token operator">=</span> temp
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token keyword">var</span> y <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token function">swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token comment">// output: x = 10;</span>
    <span class="token comment">// y = 5;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><br> <h4 id="傳名-pass-by-name"><a href="#傳名-pass-by-name" aria-hidden="true" class="header-anchor">#</a> 傳名(pass by name)</h4> <p><a href="https://docs.scala-lang.org/tour/by-name-parameters.html" title="Scala Documentation - BY-NAME PARAMETERS" target="_blank" rel="noopener noreferrer">Scala的文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>裡對傳名參數是這麼介紹的:</p> <blockquote><p>By-name parameters are only evaluated when used. They are in contrast to by-value parameters.</p></blockquote> <p>這裡透過<a href="http://metanest.jp/knuths_gps/" title="Knuth's GPS に関すること" target="_blank" rel="noopener noreferrer">Knuth's GPS に関すること - 名前呼びと Jensen's Device<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的程式碼來說明會比較易懂一些.<br>
(程式碼部份為了上色功能稍做更改)</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span>by_name x <span class="token builtin">int</span><span class="token punctuation">,</span> by_name cond <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    while <span class="token punctuation">(</span>cond<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;---&quot;</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// 執行結果:</span>
<span class="token number">5</span>
<span class="token number">6</span>
<span class="token number">7</span>
<span class="token number">8</span>
<span class="token number">9</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>以傳值呼叫來說, <strong>a &lt; 10</strong>在被傳送進foo()之前就先算出了值(true), 這段程式碼便會無窮迴圈, 無止盡的執行下去.</p> <p>而傳名呼叫, 這段條件式foo裡面, 直到開始執行while的時候才去計算 <strong>a &lt; 10</strong>這段條件式, 因此結果會如同上面的輸出結果.</p> <p>更詳細的中文解說可以看看<a href="http://www.programmer-club.com.tw/showSameTitleN/c/20923.html" title="Programmer Club - call-by-name by sunny_gong(simula)" target="_blank" rel="noopener noreferrer">sunny_gong(simula)的回答<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <blockquote><p>call-by-name 源自於 Algol60 這個<br>
古早的程式語言，它定義了兩種參數傳遞方式，<br>
call-by-value 與 call-by-name，</p> <p>其中call-by-name 被定義為 Name Replacement：「參數列中的每個參數，如果未指定以<br>
傳值的方式來傳遞，就必須以實際傳入的參數來取代。」</p> <p>在 Compilers - Principles, Techniques, and Tools 這本書的 7.5 節中，它被解釋為 <strong>inline-expansion</strong>。</p> <p>其原因是，以 call-by-name 的方式呼叫函式時，如果在某個參數位置上指定了一個運算式<br>
(expression) 當作參數，那麼這個 expression 會被直接傳入函式裡面進行展開，</p> <p>所以，這個 expression 是在函式裡面才進行運算的，而不是在參數列中預先計算好它的值再傳<br>
進去。</p> <p>這就產生了 delayed evaluation (延遲計算) 的效果。</p> <p>delayed evaluation 的好處是，只有當函式需要某個 expression 參數的值，該 expression 才會被計算，否則就不用了。</p></blockquote> <p>至於英文的介紹可以參考Simon Fraser University的教授Robert D. Cameron所寫的這篇<a href="http://www.cs.sfu.ca/~cameron/Teaching/383/PassByName.html" title="Pass-By-Name Parameter Passing by Robert D. Cameron" target="_blank" rel="noopener noreferrer">文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <br> <p>值得注意的是, 在螞蟻書裡有提到這麼一段:</p> <p>C <strong>只有</strong> 傳值; 傳參考是靠著<em>address operator</em> 與 <em>indirection operator</em> 來達成的.</p> <h4 id="_7-4-passing-arguments-to-functions-by-reference"><a href="#_7-4-passing-arguments-to-functions-by-reference" aria-hidden="true" class="header-anchor">#</a> 7.4 Passing Arguments to Functions by Reference</h4> <blockquote><p>All arguments in C are passed by value.<br>
In C, you use <em>pointers</em> and the <em>indirection operator</em> to <strong>simulate</strong> pass-by-reference.</p> <p>When calling a function with arguments that should be modified, the addresses of the arguments are passed. This is normally accomplished by applying the address operator (<strong>&amp;</strong>) to<br>
the variable (in the caller) whose value will be modified.</p> <p>As we saw in Chapter 6, arrays are<br>
not passed using operator <strong>&amp;</strong> because C <em>automatically</em> passes the starting location in memory<br>
of the array (the name of an array is equivalent to <strong>&amp;arrayName</strong>[0]).</p> <p>When the address of<br>
a variable is passed to a function, the indirection operator (*) may be used in the function<br>
to modify the value at that location in the caller’s memory.</p></blockquote> <br> <hr> <h3 id="php裡的pass-by-reference"><a href="#php裡的pass-by-reference" aria-hidden="true" class="header-anchor">#</a> PHP裡的pass by reference</h3> <p>了解了這幾種傳遞參數方式的不同以後, 就可以回來看PHP實踐pass-by-reference的部分啦.</p> <p>程式碼參考自StackOverflow的<a href="https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value" title="Is Java “pass-by-reference” or “pass-by-value”?" target="_blank" rel="noopener noreferrer">問答(Is Java “pass-by-reference” or “pass-by-value”?)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>同時也可以參考這一篇<a href="http://schlueters.de/blog/archives/125-Do-not-use-PHP-references.html" title="Do not use PHP references" target="_blank" rel="noopener noreferrer">部落格文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (或是<a href="https://learnku.com/laravel/t/9184/php-reference-is-a-pit-please-use-it-carefully" title="PHP 引用是个坑，请慎用" target="_blank" rel="noopener noreferrer">簡中翻譯版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">/**
 * Simple sample
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Sample</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$value</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>string <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">setValue</span><span class="token punctuation">(</span>string <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">value</span> <span class="token operator">=</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">value</span> <span class="token punctuation">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>Sample <span class="token variable">$sample</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$sample</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// AAA</span>
    <span class="token comment">// 111</span>

    <span class="token variable">$sample</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sample</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// BBB</span>
    <span class="token comment">// 222</span>

    <span class="token variable">$sample</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;333&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// CCC</span>
    <span class="token comment">// 333</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$prova</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sample</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 000</span>

    <span class="token function">test</span><span class="token punctuation">(</span><span class="token variable">$prova</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 111</span>
    <span class="token comment">// 222</span>
    <span class="token comment">// 333</span>

    <span class="token variable">$prova</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 111</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>首先創造了一個新的Sample, 設定它的值是000, 並指派給 <em>prova</em>.</p> <p>接著執行test()這個函式, 裡面會把剛剛傳進去的 <em>prova</em> 指派給 <em>sample</em>這個變數, 在AAA行會把<em>sample</em>的值改寫成111.</p> <p>可是, 當執行到BBB行的時候, 再度創建了一個新的Sample物件, 這時候因為產生了新的記憶體位址, <em>sample</em> 會去紀錄這個新的位址, 而不會是原來的 <em>prova</em>的位址, 於是test()函式執行完返回至<strong>main()</strong><br>
後, <em>prova</em>的最終結果會是111.</p> <br> <hr> <h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <br> <h4 id="其他參考資料"><a href="#其他參考資料" aria-hidden="true" class="header-anchor">#</a> 其他參考資料</h4> <p>Deitel, P &amp; Deitel, H (2013). <a href="http://www.deitel.com/Books/C/CHowtoProgram7e/tabid/3635/Default.aspx" target="_blank" rel="noopener noreferrer">C How to Program 7th Edition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>GJLMoTea. (2018). <a href="https://home.gamer.com.tw/creationDetail.php?sn=4051523" target="_blank" rel="noopener noreferrer">Call by value, Call by reference (address), Call by name, Call by value and copy restore<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. 巴哈姆特.</p> <p>huli. (2018). <a href="https://blog.techbridge.cc/2018/06/23/javascript-call-by-value-or-reference/" target="_blank" rel="noopener noreferrer">深入探討 JavaScript 中的參數傳遞：call by value 還是 reference？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. TechBridge 技術共筆部落格.</p> <p>阮一峰. (2015). <a href="http://www.ruanyifeng.com/blog/2015/04/tail-call.html" target="_blank" rel="noopener noreferrer">尾调用优化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. 阮一峰的网络日志.</p> <p>Wikipedia. (2019). <a href="https://en.wikipedia.org/wiki/Evaluation_strategy" target="_blank" rel="noopener noreferrer">Evaluation strategy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Wikipedia.</p> <p>[Title](href link)</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/7/2019, 3:51:24 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.41d1b430.js" defer></script><script src="/assets/js/2.93c13480.js" defer></script><script src="/assets/js/12.280a4e99.js" defer></script>
  </body>
</html>
